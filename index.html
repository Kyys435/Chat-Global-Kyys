<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Selamat Tahun Baru Sayang ‚ù§Ô∏è</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #0b0b15;
      font-family: 'Poppins', sans-serif;
      overflow: hidden;
      color: white;
      text-align: center;
    }/* Love animation */
.love {
  position: fixed;
  top: -10px;
  font-size: 22px;
  color: white;
  animation: fall linear infinite;
}

@keyframes fall {
  0% { transform: translateY(-10px); opacity: 1; }
  100% { transform: translateY(110vh); opacity: 0; }
}

h1 {
  margin-top: 80px;
  font-size: 2.2rem;
  color: #ffffff;
}

p {
  opacity: 0.8;
  font-size: 1.1rem;
}

button {
  margin-top: 25px;
  padding: 12px 22px;
  border: none;
  background: #a855f7;
  color: white;
  border-radius: 10px;
  font-size: 1.1rem;
  cursor: pointer;
  transition: 0.2s;
}

button:hover {
  background: #c084fc;
  transform: scale(1.07);
}

  .splash {
  font-size: 2.4rem;
  color: #ffffff;
  text-shadow: 0 0 10px #ffffff, 0 0 20px #c084fc;
  animation: glowFlash 1.3s infinite;
  margin-top: 80px;
}

@keyframes glowFlash {
  0% { opacity: 0.4; text-shadow: 0 0 4px #fff; }
  50% { opacity: 1; text-shadow: 0 0 14px #ffffff, 0 0 26px #c084fc; }
  100% { opacity: 0.4; text-shadow: 0 0 4px #fff; }
}

  </style>
</head>
<body>  <h1 class="splash">Selamat Tahun Baru Sayang üéÜ‚ù§Ô∏è</h1>
  <p>Aku berharap tahun ini jadi tahun terbaik buat kita berdua. Makasih udah ada di hidup aku üíú</p>  <!-- Button kirim pesan --><button onclick="sendMsg()">Kirim Pesan ke Aku</button>

  <script>
    // Auto generate falling hearts
    function createLove() {
      const love = document.createElement('div');
      love.classList.add('love');
      love.innerHTML = 'ü§ç';
      love.style.left = Math.random() * 100 + 'vw';
      love.style.animationDuration = (3 + Math.random() * 4) + 's';
      document.body.appendChild(love);
      setTimeout(() => love.remove(), 7000);
    }
    setInterval(createLove, 250);

    // Auto send text ke nomor kamu
    function sendMsg() {
      const pesan = encodeURIComponent("Selamat Tahun Baru sayang, aku buat web ini khusus buat kamu ‚ù§Ô∏è");
      const nomor = "6285779083591"; // ganti nomor kamu
      window.location.href = `https://wa.me/${nomor}?text=${pesan}`;
    }

    // AUTO SEND saat web dibuka (hapus jika tidak mau)
    setTimeout(() => {
      const pesan = encodeURIComponent("Aku sayang kamu. Selamat Tahun Baru ‚ù§Ô∏è");
      const nomor = "6285779083591"; // ganti nomor kamu
      window.location.href = `https://wa.me/${nomor}?text=${pesan}`;
    }, 2000);

  </script><audio id="bgm" src="intro.mp3" autoplay loop></audio>

</body>
</html>const img = new Image();
  img.crossOrigin = "anonymous";
  img.onload = ()=>{
    sourceImage = img;
    renderPreviewCanvas(img, beforeCanvas, beforeCtx);
    beforePanel.classList.remove('hidden');
    // hide after if previously showed
    afterPanel.classList.add('hidden');
    downloadBtn.classList.add('hidden');
    // free object URL on unload (kept until unload)
  };
  img.onerror = ()=>{
    alert('Gagal memuat gambar (CORS/format). Coba file lain.');
    try{ URL.revokeObjectURL(url); }catch(e){}
  };
  img.src = url;
});

// helper to render image into canvas preserving aspect ratio, using "contain"
function renderPreviewCanvas(img, canvas, ctx){
  // choose a preview max size based on viewport
  const maxW = Math.min(1280, window.innerWidth - 80);
  const maxH = Math.min(720, Math.round(window.innerHeight * 0.48));
  const ratio = img.naturalWidth / img.naturalHeight;
  let w = img.naturalWidth, h = img.naturalHeight;
  const scale = Math.min(maxW / w, maxH / h, 1);
  w = Math.round(w * scale);
  h = Math.round(h * scale);
  canvas.width = w; canvas.height = h;
  ctx.fillStyle = '#000';
  ctx.fillRect(0,0,w,h);
  ctx.imageSmoothingEnabled = true;
  ctx.imageSmoothingQuality = 'high';
  // center draw
  ctx.drawImage(img, 0,0, img.naturalWidth, img.naturalHeight, 0,0, w, h);
}

// create 4K upscale (draw to 3840x2160) then set preview
function create4KFromImage(img){
  return new Promise((resolve,reject)=>{
    try{
      const off = document.createElement('canvas');
      off.width = 3840; off.height = 2160;
      const ctx = off.getContext('2d');
      ctx.fillStyle = '#000'; ctx.fillRect(0,0,off.width,off.height);

      const sw = img.naturalWidth || img.width;
      const sh = img.naturalHeight || img.height;
      const scale = Math.min(off.width / sw, off.height / sh);
      const dw = Math.round(sw * scale);
      const dh = Math.round(sh * scale);
      const dx = Math.round((off.width - dw)/2);
      const dy = Math.round((off.height - dh)/2);

      ctx.imageSmoothingEnabled = true;
      ctx.imageSmoothingQuality = 'high';
      ctx.drawImage(img, 0,0, sw, sh, dx, dy, dw, dh);

      off.toBlob((b)=>{
        if(!b) return reject(new Error('Gagal membuat blob'));
        resolve({canvas: off, blob: b});
      }, 'image/png');
    }catch(err){ reject(err); }
  });
}

// handle UHD click
uhdBtn.addEventListener('click', async ()=>{
  if(!sourceImage){
    alert('Silakan pilih foto Before terlebih dahulu.');
    return;
  }
  // show loading
  loading.classList.add('show');
  try{
    // create 4K and blob
    const {canvas: offscreen, blob} = await create4KFromImage(sourceImage);
    resultBlob = blob;
    // render preview (downscale) into afterCanvas
    renderPreviewCanvas(offscreen, afterCanvas, afterCtx);
    // show after panel on top
    afterPanel.classList.remove('hidden');
    // ensure before still visible (below)
    beforePanel.classList.remove('hidden');
    // show download
    downloadBtn.classList.remove('hidden');
  }catch(err){
    console.error(err);
    alert('Gagal proses UHD: ' + (err.message || err));
  }finally{
    loading.classList.remove('show');
  }
});

// download handler
downloadBtn.addEventListener('click', ()=>{
  if(!resultBlob){
    alert('Belum ada hasil untuk di-download');
    return;
  }
  const url = URL.createObjectURL(resultBlob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'kyys_elin_uhd.png';
  document.body.appendChild(a);
  a.click();
  a.remove();
  setTimeout(()=>{ try{ URL.revokeObjectURL(url); }catch(e){} }, 2000);
});

// cleanup blob URLs on unload
window.addEventListener('beforeunload', ()=>{
  // nothing to revoke explicitly here except those created by file input (browser clears)
});
</script>
</body>
  </html>
